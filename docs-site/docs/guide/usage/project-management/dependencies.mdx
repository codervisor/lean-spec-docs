---
id: 'dependencies'
title: 'Dependencies'
sidebar_position: 11
---
# Dependencies

Manage relationships between specs with LeanSpec's dependency tracking.

## Overview

LeanSpec has two types of relationships:

### `related` - Bidirectional Soft Reference
**Meaning**: Informational relationship (specs are connected/related)
**Behavior**: Automatically shown from both sides
**Symbol**: ‚ü∑ (bidirectional arrow)

### `depends_on` - Directional Blocking Dependency
**Meaning**: Hard dependency - spec cannot start until dependencies complete
**Behavior**: Directional only (shows differently from each side)
**Symbol**: ‚Üí (depends on) and ‚Üê (blocks)

## Related Specs

Use `related` for informational connections:

```yaml
# In spec 042
related: [043, 044]
```

Both sides see the relationship:

```bash
$ lspec deps 042
Related Specs:
  ‚ü∑ 043-feature-launch [in-progress]
  ‚ü∑ 044-api-update [planned]

$ lspec deps 043
Related Specs:
  ‚ü∑ 042-error-handling [complete]  # Automatically shown!
```

**Use when:**
- Specs cover related topics or features
- Work is coordinated but not blocking
- Context is helpful but not required

## Blocking Dependencies

Use `depends_on` for hard dependencies:

```yaml
# Spec A depends on Spec B
# In spec A
depends_on: [spec-b]
```

Shows differently from each side:

```bash
$ lspec deps spec-a
Depends On:
  ‚Üí spec-b [in-progress]  # A depends on B

$ lspec deps spec-b
Required By:
  ‚Üê spec-a [planned]  # B is required by A
```

**Use when:**
- Spec truly cannot start until another completes
- There's a clear dependency chain
- Work must be done in specific order

## Deps Command

View all relationships for a spec:

```bash
lspec deps <spec>
```

Shows:
- Specs this depends on (‚Üí)
- Specs that depend on this (‚Üê)
- Related specs (‚ü∑)

### Example Output

```
üîó Dependencies for 043-feature-launch

Depends On:
  ‚Üí 042-error-handling [complete] ‚úÖ
  ‚Üí 041-api-design [complete] ‚úÖ

Required By:
  ‚Üê 044-integration-test [planned]
  ‚Üê 045-documentation [planned]

Related Specs:
  ‚ü∑ 040-performance [in-progress]
  ‚ü∑ 039-security-audit [complete]

Status: Ready to start (all dependencies complete)
```

## Best Practices

### 1. Use `related` by Default

Most relationships are informational, not blocking:

```yaml
# ‚úÖ Good - Related specs for context
related: [feature-a, feature-b]

# ‚ùå Overuse - Not a true blocking dependency
depends_on: [documentation-spec]
```

### 2. Reserve `depends_on` for True Blockers

Only use when work truly cannot start:

```yaml
# ‚úÖ Good - API must exist before integration
depends_on: [api-implementation]

# ‚ùå Bad - These can be done in parallel
depends_on: [docs-update]
```

### 3. Avoid Circular Dependencies

```yaml
# ‚ùå Bad - Circular dependency
# Spec A
depends_on: [spec-b]

# Spec B
depends_on: [spec-a]
```

LeanSpec will warn about circular dependencies.

### 4. Update Once, Show Everywhere

`related` only needs to be in one spec:

```yaml
# ‚úÖ Good - Only in spec A
# Spec A
related: [spec-b]

# Spec B - no need to list A
# (relationship automatically shown)
```

## Workflows

### Before Starting Work

Check dependencies:

```bash
lspec deps <spec>
```

Ensure all `depends_on` specs are complete before starting.

### During Planning

Map relationships:

```bash
# View related work
lspec deps feature-spec

# Check what's blocked
lspec board --status planned
```

### Identifying Bottlenecks

Find specs blocking others:

```bash
# Check what depends on this
lspec deps <in-progress-spec>

# Look for "Required By" items
```

## Dependency Patterns

### Sequential Work

```yaml
# Phase 1
status: complete

# Phase 2
depends_on: [phase-1]
status: in-progress

# Phase 3
depends_on: [phase-2]
status: planned
```

### Parallel Work with Coordination

```yaml
# Feature A
related: [feature-b, feature-c]

# Feature B
related: [feature-a, feature-c]

# Feature C
related: [feature-a, feature-b]
```

### Integration Point

```yaml
# Core Feature
status: in-progress

# Tests (blocked until feature done)
depends_on: [core-feature]

# Docs (can start early, related)
related: [core-feature]
```

## Managing Changes

### Adding Dependencies

```yaml
# Before
status: planned

# After
depends_on: [prerequisite-spec]
status: planned  # Can't start until dependency complete
```

### Removing Dependencies

When a dependency is no longer needed:

```yaml
# Before
depends_on: [old-requirement]

# After
# (remove depends_on or replace with related)
related: [old-requirement]
```

## Tips

- Check dependencies before starting work
- Use `related` for most connections
- Only use `depends_on` for true blockers
- Update relationships as you learn
- Review dependency chains during planning
- Avoid long dependency chains (breaks parallel work)

## Learning More

- **[Board & Stats](/docs/guide/board-stats)** - Visualize project state
- **[Validation](/docs/guide/validation)** - Check spec quality
- **[Frontmatter Schema](/docs/reference/frontmatter)** - Complete field reference
