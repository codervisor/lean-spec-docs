---
id: 'cli'
title: 'CLI Reference'
sidebar_position: 1
---
# CLI Commands

Complete reference for all LeanSpec CLI commands.

## Global Options

Available for all commands:

- `--help` - Show help for a command
- `--version` - Show LeanSpec version

## Commands

### `lspec init`

Initialize LeanSpec in your project.

```bash
lspec init
```

**Interactive prompts:**
1. Choose setup path (quick start, choose template, or customize)
2. Handle existing files (merge, backup, or skip)
3. Configure initial settings

**What it creates:**
- `.lspec/config.json` - Configuration file
- `.lspec/templates/` - Custom templates directory
- `specs/` - Specs directory
- `AGENTS.md` - AI agent integration guidance (if not present)

**Options:**
- None (fully interactive)

---

### `lspec create`

Create a new spec.

```bash
lspec create <name> [options]
```

**Arguments:**
- `<name>` - Spec name (required)

**Options:**
- `--title <title>` - Set custom title
- `--description <desc>` - Set initial description
- `--tags <tags>` - Comma-separated tags
- `--priority <priority>` - Set priority (`low`, `medium`, `high`, `critical`)
- `--assignee <name>` - Set assignee
- `--template <template>` - Use a specific template
- `--field <name=value>` - Set custom field (can be used multiple times)
- `--no-prefix` - Skip date prefix even if configured

**Examples:**

```bash
# Basic spec
lspec create user-authentication

# Spec with metadata
lspec create user-auth --status=planned --priority=high --tags=security,api

# Spec with custom fields
lspec create user-auth --field epic=PROJ-123 --field sprint=42
```

**Output:**
```
âœ“ Created: specs/001-user-authentication/
  Edit: specs/001-user-authentication/README.md
```

**Behavior:**
- Creates `specs/NNN-name/` directory (flat structure with global numbering)
- Generates `README.md` from template
- Assigns sequential number (NNN) globally across all specs
- Sets frontmatter with metadata

**Note**: Default is flat structure. For date-based grouping, configure `pattern: "custom"` in `.lspec/config.json`.

---

### `lspec list`

List all specs with optional filtering.

```bash
lspec list [options]
```

**Options:**
- `--archived` - Include archived specs
- `--status <status>` - Filter by status (`planned`, `in-progress`, `complete`, `archived`)
- `--priority <priority>` - Filter by priority (`low`, `medium`, `high`, `critical`)
- `--tag <tag>` - Filter by tag (can specify multiple)
- `--assignee <name>` - Filter by assignee
- `--field <name=value>` - Filter by custom field (can specify multiple)
- `--sort <field>` - Sort by field (`id`, `created`, `name`, `status`, `priority`) (default: `id`)
- `--order <order>` - Sort order (`asc`, `desc`) (default: `desc`)

**Examples:**

```bash
# List all specs
lspec list

# Filter by status
lspec list --status=in-progress
lspec list --status=planned

# Filter by priority
lspec list --priority=high

# Filter by tag
lspec list --tag=api

# Combine filters
lspec list --status=planned --priority=high --tag=api

# Filter by custom field
lspec list --field epic=PROJ-123
```

**Output:**
```
=== Specs ===

ğŸ“… specs/001-user-authentication
   Created: 2025-11-02 Â· Priority: high Â· Tags: security, api

â³ specs/002-password-reset
   Created: 2025-11-02 Â· Priority: medium
```

**Note**: Output shows flat structure (default). With date-grouping configured, paths would be `specs/YYYYMMDD/NNN-name/`.

**Status Icons:**
- ğŸ“… Planned
- â³ In progress
- âœ… Complete
- ğŸ“¦ Archived

---

### `lspec update`

Update spec metadata.

```bash
lspec update <spec> [options]
```

**Arguments:**
- `<spec>` - Spec identifier (required). Can be:
  - Spec number: `42` or `042`
  - Spec name: `unified-dashboard`
  - Full folder: `045-unified-dashboard`

**Options:**
- `--status <status>` - Update status (`planned`, `in-progress`, `complete`, `archived`)
- `--priority <priority>` - Update priority (`low`, `medium`, `high`, `critical`)
- `--tags <tags>` - Update tags (comma-separated, replaces existing)
- `--assignee <name>` - Set assignee
- `--field <name=value>` - Update custom field (can be used multiple times)

**Examples:**

```bash
# Update status (using spec number)
lspec update 1 --status=in-progress

# Update priority (using spec name)
lspec update user-auth --priority=critical

# Update tags
lspec update 001-user-auth --tags=security,api,mvp

# Update custom fields
lspec update 1 --field epic=PROJ-123

# Update multiple fields
lspec update 1 --status=complete --priority=high
```

**Output:**
```
âœ“ Updated: specs/001-user-auth
  Fields: status, priority
```

**Special Behavior:**
- Setting status to `complete` automatically adds `completed` timestamp
- Visual badges in README.md are auto-updated
- Both frontmatter and badges stay in sync

---

### `lspec search`

Full-text search across all specs.

```bash
lspec search <query> [options]
```

**Arguments:**
- `<query>` - Search query (required)

**Options:**
- `--status <status>` - Filter results by status
- `--priority <priority>` - Filter results by priority
- `--tag <tag>` - Filter results by tag
- `--assignee <name>` - Filter results by assignee
- `--field <name=value>` - Filter results by custom field (can specify multiple)

**Examples:**

```bash
# Basic search
lspec search "authentication"

# Search with filters
lspec search "JWT token" --status=in-progress
lspec search "API" --tag=security
lspec search "password" --field epic=PROJ-123
```

**Output:**
```
Found 2 specs matching "authentication":

ğŸ“… specs/001-user-authentication
   Created: 2025-11-02
   Matches in: Overview, Key Scenarios

â³ specs/003-two-factor-auth
   Created: 2025-11-02
   Matches in: Technical Approach
```

**Search Behavior:**
- Searches in spec content (README.md)
- Case-insensitive
- Searches title, overview, scenarios, criteria, etc.
- Does not search frontmatter metadata

---

### `lspec archive`

Archive completed specs.

```bash
lspec archive <spec>
```

**Arguments:**
- `<spec>` - Spec identifier (required). Can be:
  - Spec number: `42` or `042`
  - Spec name: `unified-dashboard`
  - Full folder: `045-unified-dashboard`

**Examples:**

```bash
# Archive by spec number
lspec archive 1

# Archive by name
lspec archive user-auth
```

**Output:**
```
âœ“ Archived: specs/001-user-auth
  Moved to: specs/archived/001-user-auth
```

**Behavior:**
- Moves spec from `specs/` to `specs/archived/`
- Preserves directory structure
- Keeps all metadata
- Spec no longer appears in `lspec list` by default

**Best Practice:**
- Update status to `complete` before archiving
- Archive specs when work is fully done
- Use to keep active workspace clean

---

### `lspec view`

View spec content.

```bash
lspec view <spec> [options]
```

**Arguments:**
- `<spec>` - Spec identifier (required). Can be:
  - Spec number: `42` or `042`
  - Spec name: `unified-dashboard`
  - Full folder: `045-unified-dashboard`

**Options:**
- `--raw` - Output raw markdown (for piping/scripting)
- `--json` - Output as JSON
- `--no-color` - Disable colors

**Examples:**

```bash
# View formatted spec
lspec view 001-user-authentication

# Get raw markdown (for scripting)
lspec view 001-user-auth --raw | grep "TODO"

# Get structured JSON
lspec view 001-user-auth --json | jq '.frontmatter.status'
```

**Default Output (formatted):**
```
â”â”â” 001-user-authentication â”â”â”

ğŸ“… Status: planned
ğŸŸ¡ Priority: high
ğŸ“† Created: 2025-11-02
ğŸ·ï¸  Tags: #security #api

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# User Authentication

## Overview
...
```

**Raw Output (`--raw`):**
```markdown
---
status: planned
priority: high
created: 2025-11-02
tags:
  - security
  - api
---

# User Authentication

## Overview
...
```

**JSON Output (`--json`):**
```json
{
  "name": "001-user-authentication",
  "path": "specs/001-user-authentication",
  "frontmatter": {
    "status": "planned",
    "priority": "high",
    "created": "2025-11-02",
    "tags": ["security", "api"]
  },
  "content": "# User Authentication\n\n## Overview\n..."
}
```

**Use Cases:**
- **Default**: Human-readable spec viewing
- **`--raw`**: Piping to other tools, AI context, version control diffs
- **`--json`**: Programmatic access, CI/CD, integrations

---

### `lspec open`

Open spec in editor.

```bash
lspec open <spec> [options]
```

**Arguments:**
- `<spec>` - Spec identifier (required). Can be:
  - Spec number: `42` or `042`
  - Spec name: `unified-dashboard`
  - Full folder: `045-unified-dashboard`

**Options:**
- `--editor <editor>` - Specify editor command

**Examples:**

```bash
# Open in default editor
lspec open 001-user-authentication

# Open in specific editor
lspec open 001-user-auth --editor=code
lspec open 001-user-auth --editor=vim
```

**Editor Selection:**
1. `--editor` flag if provided
2. `$VISUAL` environment variable
3. `$EDITOR` environment variable
4. System default (`open` on macOS, `xdg-open` on Linux, `start` on Windows)

**Behavior:**
- Opens the spec's `README.md` file
- GUI editors (VS Code, Atom) don't block terminal
- Terminal editors (vim, nano) block until closed

---

### `lspec templates`

List available project templates.

```bash
lspec templates
```

**Output:**
```
=== Available Templates ===

minimal        Just folder structure, no extras
standard       Recommended - includes AGENTS.md (default)
enterprise     Governance with approvals and compliance

Use: lspec init
Then choose "Choose a template" option
```

---

### `lspec stats`

Show statistics about specs.

```bash
lspec stats
```

**Output:**
```
=== Spec Statistics ===

Total Specs: 15
  Planned: 5
  In Progress: 7
  Complete: 3

By Priority:
  Critical: 2
  High: 6
  Medium: 5
  Low: 2

By Tag:
  api: 8
  security: 5
  ui: 3
```

---

### `lspec board`

View specs organized by status (Kanban-style).

```bash
lspec board
```

**Output:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    LeanSpec Board                         â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ PLANNED          IN PROGRESS         COMPLETE             â•‘
â• â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•£
â•‘ user-auth       â”‚ api-gateway        â”‚ login-ui           â•‘
â•‘ rate-limiting   â”‚ database-setup     â”‚ password-hash      â•‘
â•‘ oauth-provider  â”‚ error-handling     â”‚ session-mgmt       â•‘
â•‘                 â”‚                    â”‚                    â•‘
â•‘ 3 specs         â”‚ 3 specs            â”‚ 3 specs            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

### `lspec deps`

Show dependencies for a spec (coming soon).

```bash
lspec deps <spec>
```

**Arguments:**
- `<spec>` - Spec identifier. Can be:
  - Spec number: `42` or `042`
  - Spec name: `unified-dashboard`
  - Full folder: `045-unified-dashboard`

**Note:** This feature is planned but not yet implemented.

---

## Spec Identifiers

All commands that accept a `<spec>` argument support flexible formats:

```bash
# Spec number (with or without padding)
42
042

# Spec name
unified-dashboard

# Full folder name
045-unified-dashboard

# With old date-based structure (still supported)
specs/20251102/001-user-auth
20251102/001-user-auth
001-user-auth
```

LeanSpec will find the spec regardless of which format you use.

---

## Configuration

Commands respect settings in `.lspec/config.json`:

```json
{
  "template": "spec-template.md",
  "specsDir": "specs",
  "structure": {
    "pattern": "flat",
    "sequenceDigits": 3,
    "defaultFile": "README.md"
  },
  "frontmatter": {
    "required": ["status", "created"],
    "optional": ["tags", "priority"],
    "custom": {
      "epic": "string",
      "sprint": "number"
    }
  }
}
```

See [Configuration Reference](/docs/reference/config) for details.

---

## Exit Codes

- `0` - Success
- `1` - Error (invalid arguments, file not found, etc.)
- `2` - User cancelled operation

---

**Next**: Explore [Configuration](/docs/reference/config) or learn about [Custom Fields](/docs/guide/custom-fields).
