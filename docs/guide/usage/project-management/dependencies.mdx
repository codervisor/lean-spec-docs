---
id: 'dependencies'
title: 'Dependencies'
sidebar_position: 11
---
# Dependencies

Manage relationships between specs with LeanSpec's dependency tracking.

## Overview

LeanSpec has two types of relationships:

### `related` - Bidirectional Soft Reference
- **Meaning**: Informational relationship (specs are connected/related)
- **Behavior**: Automatically shown from both sides
- **Symbol**: ⟷ (bidirectional arrow)

### `depends_on` - Directional Blocking Dependency
- **Meaning**: Hard dependency - spec cannot start until dependencies complete
- **Behavior**: Directional only (shows differently from each side)
- **Symbol**: → (depends on) and ← (blocks)

## Related Specs

Use `related` for informational connections:

```bash
# Link spec 042 to 043 and 044
lean-spec link 042 --related 043,044
```

Both sides see the relationship:

```bash
$ lean-spec deps 042
Related Specs:
  ⟷ 043-feature-launch [in-progress]
  ⟷ 044-api-update [planned]

$ lean-spec deps 043
Related Specs:
  ⟷ 042-error-handling [complete]  # Automatically shown!
```

**Use when:**
- Specs cover related topics or features
- Work is coordinated but not blocking
- Context is helpful but not required

## Blocking Dependencies

Use `depends_on` for hard dependencies:

```bash
# Spec A depends on Spec B
lean-spec link spec-a --depends-on spec-b
```

Shows differently from each side:

```bash
$ lean-spec deps spec-a
Depends On:
  → spec-b [in-progress]  # A depends on B

$ lean-spec deps spec-b
Required By:
  ← spec-a [planned]  # B is required by A
```

**Use when:**
- Spec truly cannot start until another completes
- There's a clear dependency chain
- Work must be done in specific order

## Deps Command

View all relationships for a spec:

```bash
lean-spec deps <spec>
```

Shows:
- Specs this depends on (→)
- Specs that depend on this (←)
- Related specs (⟷)

### Example Output

```
Dependency Graph for 043-feature-launch

Depends On:
  → 042-error-handling [complete] ✅
  → 041-api-design [complete] ✅

Required By:
  ← 044-integration-test [planned]
  ← 045-documentation [planned]

Related Specs:
  ⟷ 040-performance [in-progress]
  ⟷ 039-security-audit [complete]
```

## Best Practices

### 1. Use `related` by Default

Most relationships are informational, not blocking:

```bash
# ✅ Good - Related specs for context
lean-spec link feature-a --related feature-b

# ❌ Overuse - Not a true blocking dependency
lean-spec link feature-a --depends-on documentation-spec
```

### 2. Reserve `depends_on` for True Blockers

Only use when work truly cannot start:

```bash
# ✅ Good - API must exist before integration
lean-spec link integration --depends-on api-implementation

# ❌ Bad - These can be done in parallel
lean-spec link feature --depends-on docs-update
```

### 3. Avoid Circular Dependencies

```bash
# ❌ Bad - Circular dependency
lean-spec link spec-a --depends-on spec-b
lean-spec link spec-b --depends-on spec-a
```

LeanSpec will warn about circular dependencies.

### 4. Update Once, Show Everywhere

`related` only needs to be linked from one side:

```bash
# ✅ Good - Link from A to B
lean-spec link spec-a --related spec-b

# Spec B automatically shows relationship to A
```

## Workflows

### Before Starting Work

Check dependencies:

```bash
lean-spec deps <spec>
```

Ensure all `depends_on` specs are complete before starting.

### During Planning

Map relationships:

```bash
# View related work
lean-spec deps feature-spec

# Check what's blocked
lean-spec board --status planned
```

### Identifying Bottlenecks

Find specs blocking others:

```bash
# Check what depends on this
lean-spec deps <in-progress-spec>

# Look for "Required By" items
```

## Dependency Patterns

### Sequential Work

```bash
# Phase 2 depends on Phase 1
lean-spec link phase-2 --depends-on phase-1

# Phase 3 depends on Phase 2
lean-spec link phase-3 --depends-on phase-2
```

### Parallel Work with Coordination

```bash
# Link all related features
lean-spec link feature-a --related feature-b,feature-c
lean-spec link feature-b --related feature-c
```

### Integration Point

```bash
# Tests blocked until feature done
lean-spec link tests --depends-on core-feature

# Docs related but not blocked
lean-spec link docs --related core-feature
```

## Managing Changes

### Adding Dependencies

```bash
# Add dependency
lean-spec link my-spec --depends-on prerequisite-spec
```

### Removing Dependencies

When a dependency is no longer needed:

```bash
# Remove dependency
lean-spec unlink my-spec --depends-on old-requirement

# Replace with related (optional)
lean-spec link my-spec --related old-requirement
```

## Tips

- Use `lean-spec link` and `lean-spec unlink` (avoid manual frontmatter edits)
- Check dependencies before starting work
- Use `related` for most connections
- Only use `depends_on` for true blockers
- Update relationships as you learn
- Review dependency chains during planning
- Avoid long dependency chains (breaks parallel work)

## Learning More

- **[Board & Stats](/docs/guide/usage/project-management/board-stats)** - Visualize project state
- **[Validation](/docs/guide/usage/project-management/validation)** - Check spec quality
- **[Frontmatter Schema](/docs/reference/frontmatter)** - Complete field reference
