---
title: 使用 AI 管理多个规格说明
sidebar_position: 3
description: 协调多个规格说明之间的依赖关系、优先级和 AI agent。
---

# 使用 AI 管理多个规格说明

**时间**：20-25 分钟  
**目标**：使用 LeanSpec 元数据 + Copilot Agent Mode 保持四个相互依赖的规格说明推进，不失去对阻塞因素的跟踪。

## 场景
路线图项目：
1. \`user-authentication\` — 登录/注册
2. \`shopping-cart\` — 依赖于身份验证
3. \`product-catalog-api\` — 后端数据源
4. \`product-search\` — 依赖于目录，与购物车相关

## 第 1 步：让 AI 构建关系图（02:00）

\`\`\`bash
lean-spec list --json &gt; .lean-spec/cache/specs.json
\`\`\`

提示：

\`\`\`
加载 .lean-spec/cache/specs.json，为我们刚创建的四个规格说明提出
依赖关系/关联关系。返回我可以用 \`lean-spec link\` 运行的命令。
\`\`\`

粘贴建议的命令（运行前先审查）：

\`\`\`bash
lean-spec link shopping-cart --depends-on user-authentication
lean-spec link product-search --depends-on product-catalog-api
lean-spec link product-search --related shopping-cart
\`\`\`

## 第 2 步：通过 Agent 设置优先级 + 标签（05:00）
询问 agent：

\`\`\`
根据依赖关键性设置优先级/标签。仅输出 \`lean-spec update\` 命令。
\`\`\`

示例输出：

\`\`\`bash
lean-spec update user-authentication --priority high --tags "auth,backend"
lean-spec update product-catalog-api --priority high --tags "catalog,backend"
lean-spec update shopping-cart --priority medium --tags "cart,frontend"
lean-spec update product-search --priority low --tags "search,frontend"
\`\`\`

运行命令，然后用 \`lean-spec list\` 确认。

## 第 3 步：使用 AI 总结看板（08:00）

\`\`\`bash
lean-spec board --json &gt; .lean-spec/cache/board.json
\`\`\`

提示：

\`\`\`
根据 board.json，总结阻塞因素并推荐下一步行动。
突出显示任何仍处于计划状态的高优先级规格说明。
\`\`\`

示例总结：
- \`user-authentication\` — 高优先级，已计划 → 应立即开始
- \`product-catalog-api\` — 高优先级，已计划 → 并行运行
- \`shopping-cart\` — 被阻塞（依赖于身份验证）
- \`product-search\` — 较低优先级，但与购物车相关以共享组件

相应更新状态：

\`\`\`bash
lean-spec update user-authentication --status in-progress
lean-spec update product-catalog-api --status in-progress
\`\`\`

## 第 4 步：让 AI 监控依赖关系（12:00）
每当规格说明状态改变时，运行：

\`\`\`bash
lean-spec deps shopping-cart --json &gt; .lean-spec/cache/cart-deps.json
\`\`\`

提示想法：

\`\`\`
分析 cart-deps.json。所有阻塞规格说明是否都已完成？如果是，
起草命令将 shopping-cart 标记为 in-progress，并起草一个启动检查清单，
我可以将其粘贴到规格说明中。
\`\`\`

结果：
- 命令：\`lean-spec update shopping-cart --status in-progress\`
- 要添加到 \`## 计划（Plan）\` 下的检查清单片段

## 第 5 步：多规格说明状态审查仪式（15:00）
创建可重用的 agent 宏/文本片段：

\`\`\`
运行：
1. lean-spec board --json
2. lean-spec stats --json
3. lean-spec search "priority:high status:planned" --json

合并结果并告诉我：
- 哪些规格说明已准备好但未启动
- 哪些进行中的规格说明最近没有更新
- 任何未解决的依赖关系
\`\`\`

在站会或开始新编码会话之前使用此检查。

## 第 6 步：使用 AI 协助关闭规格说明（20:00）
规格说明实施后：

\`\`\`bash
lean-spec update user-authentication --status complete
lean-spec view user-authentication --json &gt; .lean-spec/cache/auth.json
\`\`\`

提示：

\`\`\`
使用 auth.json，编写一个简短的结果部分，总结变化、指标和后续行动。
保持在 120 字以内。
\`\`\`

将摘要附加到规格说明，以便未来读者（和 AI）看到工作如何结束。

## 工具包回顾

| 需求 | 命令 | Agent 提示 |
| --- | --- | --- |
| 发现关系 | \`lean-spec list --json\` | "建议依赖关系/关联关系作为命令。" |
| 优先级排序 | \`lean-spec update --priority ...\` | "根据阻塞因素分配优先级。" |
| 发现阻塞因素 | \`lean-spec deps &lt;spec&gt; --json\` | "解释是什么阻止了这个规格说明的推进。" |
| 聚焦站会 | \`lean-spec board --json\` | "总结状态 + 下一步行动。" |
| 完成循环 | \`lean-spec view &lt;spec&gt; --json\` | "起草结果摘要 + 后续行动。" |

## 检查清单
- ☐ 每个依赖关系都用 \`lean-spec link --depends-on\` 记录
- ☐ 相关工作用 \`--related\` 映射
- ☐ 优先级/标签反映现实（AI 可以建议更新）
- ☐ 看板在 JSON 中审查 + AI 总结
- ☐ 被阻塞的规格说明在 README 中注明其阻塞因素
- ☐ 已完成的规格说明包含结果说明

## 下一步
1. 使用 VS Code 任务自动化你的仪式，在每次会话前运行 JSON 导出
2. 重访 [依赖关系指南](/docs/guide/usage/cli/project-management#dependencies) 以获取更深入的自动化想法
