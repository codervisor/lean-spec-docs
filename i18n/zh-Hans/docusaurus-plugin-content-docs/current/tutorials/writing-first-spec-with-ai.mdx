---
title: 使用 AI 编写你的第一个规格说明
sidebar_position: 1
description: 与 GitHub Copilot Agent Mode 合作，在 10 分钟内将意图转化为 LeanSpec
---

# 使用 AI 编写你的第一个规格说明

**时间**：10-15 分钟  
**目标**：提供意图，让 Copilot Agent Mode 起草规格说明，并完成一个经过审查的、可实施的 LeanSpec。

## 前置条件
- 已启用 [GitHub Copilot Agent Mode](https://docs.github.com/en/copilot/github-copilot-in-the-integrated-development-environment/github-copilot-agent-in-visual-studio-code) 的 VS Code
- 已全局安装 LeanSpec CLI（\`npm install -g lean-spec\`）或本地使用（\`npx lean-spec\`）
- 工作区中包含 \`specs/\` 目录（如果是全新开始，请运行 \`lean-spec init\`）

## 第 1 步：与 Agent 分享意图
打开 VS Code，聚焦 agent 面板，粘贴你的意图。示例提示：

\`\`\`
我想为我们的 SaaS 仪表板添加免密码登录（魔术链接）。
帮我起草一个 LeanSpec，说明问题、为什么重要、
约束条件（必须保留当前的 MFA）以及后端和用户体验的成功标准。
保持在 2,000 tokens 以内。
\`\`\`

如果 agent 还没有看过 AGENTS.md 指令，它会请求该文件。批准文件共享，以便它理解项目约定。

## 第 2 步：让 Agent 勾勒规格说明大纲
要求 agent 在编写完整文本之前先生成大纲：

\`\`\`
先总结规格说明大纲：概述、为什么现在做、需求、
风险、验证和计划。等待我的批准后再展开各部分。
\`\`\`

审查大纲。如果缺少某些内容（例如，"电子邮件服务限制"），要求 agent 在继续之前添加。

## 第 3 步：生成草稿
给予许可：

\`\`\`
看起来不错。为每个部分填写可操作的内容，并包含
实施和验证的检查清单。
\`\`\`

Agent 会内联编写规格说明。将内容复制到 \`specs/###-feature/README.md\`（如果规格说明目录尚不存在，使用 \`lean-spec create passwordless-login\`）。

## 第 4 步：按照精简原则审查
逐步检查草稿：

- **上下文经济（Context Economy）** — 规格说明是否在约 300 行以内？如果不是，询问 agent 哪些部分应移至子规格说明。
- **信噪比（Signal-to-Noise）** — 删除重复和营销性描述。
- **意图优于实现（Intent Over Implementation）** — 确保 "为什么" 在 "如何" 之前清晰表达。

有用的提示：

\`\`\`
重写目标部分，使每个要点用一句话解释对用户的影响。

如果我们想包含时序图，建议提取到 DESIGN.md。
\`\`\`

## 第 5 步：验证并设置状态
内容看起来不错后：

\`\`\`bash
lean-spec validate passwordless-login
lean-spec update passwordless-login --status planned
\`\`\`

如果有警告，与 agent 共享验证输出。示例提示：

\`\`\`
验证警告说规格说明有 2,450 tokens。通过合并相关任务来减少计划部分。
\`\`\`

## 第 6 步：记录 AI/人类职责
通过记录谁做什么来完成循环：

- 添加带有人类负责步骤的检查框的 \`## 实施计划（Implementation Plan）\`。
- 添加 \`## AI 交接（AI Handoff）\` 部分，总结 agent 稍后应修改的文件。

提示想法：

\`\`\`
添加 "AI 交接" 部分，列出 Copilot agent 在实施此规格说明时
应触及的仓库路径。
\`\`\`

## 最终检查清单
- ☐ 前置元数据已设置状态 \`planned\`、标签和优先级
- ☐ 规格说明 < 2,000 tokens 或拆分为子规格说明
- ☐ 成功标准和验证步骤明确
- ☐ AI 交接部分列出下一步命令/文件
- ☐ \`lean-spec validate\` 通过

## 你学到了什么
✅ 如何使用 Copilot Agent Mode 作为规格说明合著者  
✅ 如何使 AI 输出与 LeanSpec 第一原则保持一致  
✅ 如何用 AGENTS.md 和验证反馈指导 agent  
✅ 如何将完成的规格说明交回人类/AI 进行实施

## 下一步教程
1. [AI 辅助的功能开发 →](./ai-assisted-feature-development)
2. [使用 AI 管理多个规格说明 →](./managing-multiple-specs-with-ai)
<- [Full 3. [与 AI Agent 的团队协作 →](./team-collaboration-ai-agents) -->

需要更多上下文？重访 [理解 LeanSpec](/docs/guide/understanding-leanspec) 或 [SDD 工作流](/docs/guide/terminology/sdd-workflow)。
